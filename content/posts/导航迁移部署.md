# 标题：导航迁移部署
导航迁移部署到ORIN 64GB NX
小车的导航实现主要包括感知和运控两部分
## 一、感知
### 1. IMU 
  在底盘上和运控一起处理
### 2. 激光雷达
  硬件连接 一端接5伏1.5安的电源，一端连接ORIN
1. 检查：byd@ubuntu:~/workspace$ lsusb
Bus 001 Device 007: ID 10c4:ea60 Silicon Labs CP210x UART Bridge
 ID 10c4:ea60 为激光雷达
2. 检查：byd@ubuntu:~/workspace$ ll /dev/ttyUSB*
crw-rw-rw- 1 root dialout 188, 0 11月 13 09:52 /dev/ttyUSB0
如果没有，安装CP210x驱动
3. 检查：byd@ubuntu:~/workspace$ ll /dev/rplidar 
lrwxrwxrwx 1 root root 7 11月 13 09:52 /dev/rplidar -> ttyUSB0
如果没有：配置udev文件
以底盘为例
创建规则文件
sudo gedit /etc/udev/rules.d/99-myserials.rules
示例：如果设备节点是 ttyCH341USB0（如果ttyUSB0则不同，自行解决）
SUBSYSTEM=="tty", ATTRS{idVendor}=="1a86", ATTRS{idProduct}=="7523", MODE:="0666", SYMLINK+="myserial"

重启规则
sudo udevadm control --reload-rules
sudo udevadm trigger

检查结果
ls -l /dev/myserial
    若出现 byd@ubuntu:~$ ls -l /dev/myserial
lrwxrwxrwx 1 root root 12 11月 12 14:49 /dev/myserial -> ttyCH341USB0
即可 如开头部分不一样，权限问题 chmod解决
## 二、底盘控制
1. 检查：byd@ubuntu:~/workspace$ lsusb
Bus 001 Device 008: ID 1a86:7523 QinHeng Electronics CH340 serial converter
 ID ID 1a86:7523 为开发板
2. 检查：byd@ubuntu:~/workspace$ ll /dev/ttyCH341USB0 
crw-rw-rw- 1 root dialout 169, 0 11月 13 09:59 /dev/ttyCH341USB0
如果没有，安装CH340驱动
3. 检查：byd@ubuntu:~/workspace$ ll /dev/myserial 
lrwxrwxrwx 1 root root 12 11月 13 09:59 /dev/myserial -> ttyCH341USB0
如果没有：配置udev文件
以底盘为例
创建规则文件
sudo gedit /etc/udev/rules.d/99-rplidar.rules（这里数字开头代表规则优先级）
示例：如果设备节点是ttyUSB0）
KERNEL=="ttyUSB*", ATTRS{idVendor}=="10c4", ATTRS{idProduct}=="ea60", MODE:="0666", SYMLINK+="rplidar"

重启规则
sudo udevadm control --reload-rules
sudo udevadm trigger

检查结果
ls -l /dev/myserial
    若出现 byd@ubuntu:~$ ls -l /dev/myserial
lrwxrwxrwx 1 root root 12 11月 12 14:49 /dev/myserial -> ttyCH341USB0
即可 如开头部分不一样，权限问题 chmod解决
## 三、环境变量
  小车的类型，激光雷达的类型

export ROS_DOMAIN_ID=28
export ROBOT_TYPE=x3   		# r2, x3
export RPLIDAR_TYPE=s2 		# a1, s2, 4ROS
export CAMERA_TYPE=astraplus  	# astrapro, astraplus
echo "--------------------------------------------------------"
echo -e "ROS_DOMAIN_ID: \033[32m$ROS_DOMAIN_ID\033[0m" 
echo -e "my_robot_type: \033[32m$ROBOT_TYPE\033[0m | my_lidar: \033[32m$RPLIDAR_TYPE\033[0m | my_camera: \033[32m$CAMERA_TYPE\033[0m"
echo "--------------------------------------------------------"

这里仅仅是简单示例，建议将小车的全部文件copy进orin文件，然后修改即可


## 四、注意
  这里绑定的ll /dev/rplidar 和 ll /dev/myserial 为配置文件决定

  ![](/images/image-2.png)


  这里是yahboom写好的，这个文件 sllidar_s2_launch.py是一个 ROS 2 启动文件，它的主要作用是配置和启动思岚（Slamtec）S2 型号激光雷达的 ROS 2 节点。 
  它位于：/home/byd/workspaceback/wxp/yahboomcar_ws/silan/src/sllidar_ros2/launch

  ![](/images/image-1.png)

最小化导航系统硬件示意图




